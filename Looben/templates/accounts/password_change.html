{% extends 'base.html' %}
{% load static %}


{% block head_content%}
    <link rel="stylesheet" href="{% static 'css/accounts/message.css' %}">
{% endblock %}


{% block content %}
<!-- **************** MAIN CONTENT START **************** -->
<main>
    <!-- Container START -->
    <div class="container">
      {% if messages %}
      <ul class="messages">
        {% for message in messages %}
            <li class="{{ message.tags }}">
                {{ message|safe }}
                <a href="{% url 'accounts:password_change' %}" class="close">x</a>
            </li>
        {% endfor %}
      </ul>
      {% endif %}

      <div class="row">
        <!-- Sidenav START -->
        <div class="col-lg-3">
          <!-- Advanced filter responsive toggler START -->
          <!-- Divider -->
          <div class="d-flex align-items-center mb-4 d-lg-none">
            <button class="border-0 bg-transparent" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
              <i class="btn btn-primary fw-bold fa-solid fa-sliders"></i>
              <span class="h6 mb-0 fw-bold d-lg-none ms-2">各種設定</span>
            </button>
          </div>
          <!-- Advanced filter responsive toggler END -->
  
          <nav class="navbar navbar-light navbar-expand-lg mx-0">
            <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar">
              <!-- Offcanvas header -->
              <div class="offcanvas-header">
                <button type="button" class="btn-close text-reset ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
              </div>
  
              <!-- Offcanvas body -->
              <div class="offcanvas-body p-0">
                <!-- Card START -->
                <div class="card w-100">
                  <!-- Card body START -->
                  <div class="card-body">
  
                  <!-- Side Nav START -->
                  <ul class="nav nav-tabs nav-pills nav-pills-soft flex-column fw-bold gap-2 border-0">
                    <li class="nav-item" data-bs-dismiss="offcanvas">
                      <a class="nav-link d-flex mb-0" href="{% url 'accounts:account_setting' username=user.username %}"> <img class="me-2 h-20px fa-fw" src="{% static 'images/icon/person-outline-filled.svg' %}" alt="プロフィール"><span>プロフィールを編集</span></a>
                    </li>
                    <li class="nav-item" data-bs-dismiss="offcanvas">
                        <a class="nav-link d-flex mb-0 active" href="{% url 'accounts:password_change' %}"> <img class="me-2 h-20px fa-fw" src="{% static 'images/icon/key-outline-filled.svg' %}" alt="パスワード"><span>パスワードを変更</span></a>
                    </li>
                    <li class="nav-item" data-bs-dismiss="offcanvas">
                      <a class="nav-link d-flex mb-0" href="#nav-setting-tab-2"> <img class="me-2 h-20px fa-fw" src="{% static 'images/icon/notification-outlined-filled.svg' %}" alt="通知"><span>プッシュ通知</span></a>
                    </li>
                    <li class="nav-item" data-bs-dismiss="offcanvas">
                      <a class="nav-link d-flex mb-0" href="#nav-setting-tab-3"> <img class="me-2 h-20px fa-fw" src="{% static 'images/icon/shield-outline-filled.svg' %}" alt="プライバシー"><span>プライバシーとセキュリティ</span></a>
                    </li>
                    <li class="nav-item" data-bs-dismiss="offcanvas">
                      <a class="nav-link d-flex mb-0" href="{% url 'accounts:user_logout' %}"> <img class="me-2 h-20px fa-fw" src="{% static 'images/icon/forward-outline-filled.svg' %}" alt="ログアウト"><span>ログアウト</span></a>
                    </li>
                  </ul>
                  <!-- Side Nav END -->
  
                </div>
                <!-- Card body END -->
                <!-- Card footer -->
                <div class="card-footer text-center py-2">
                  <a class="btn btn-link text-secondary btn-sm" href="{% url 'dashboard:post_in_dashboard' username=user.username %}">ダッシュボードを見る</a>
                </div>
                </div>
              <!-- Card END -->
              </div>
              
              <!-- Copyright -->
              <p class="small text-center mt-1">©2022 Looben</p>
            
            </div>
          </nav>
        </div>
        <!-- Sidenav END -->


        <!-- Change your password START -->
        <!-- Main content START -->
        <div class="col-lg-6 vstack gap-4">
            <!-- Setting Tab content START -->
            <div class="tab-content py-0 mb-0">
  
              <!-- Account setting tab START -->
              <div class="tab-pane show active fade" id="nav-setting-tab-1">
                <!-- Account settings START -->
                <div class="card mb-4">
                  
                  <!-- Title START -->
                  <div class="card-header border-0 pb-0">
                    <h1 class="h5 card-title">パスワード変更</h1>
                    <p class="mb-0">パスワードを変更するときは、新しいパスワードを忘れないようにメモなどをすることをオススメします。</p>
                  </div>
                  <!-- Card header START -->
                  <!-- Card body START -->
                  <div class="card-body">
                    <!-- Form settings START -->
                    <form class="row g-3" method="post">
                      {{ password_change_form.non_field_errors }}
                      {% csrf_token %}
                      <!-- パスワード　 -->
                      <div class="col-12">
                        <label class="form-label">新しいパスワード</label>
                        {{ password_change_form.password }}
                      </div>
                      {{ password_change_form.password.errors }}
                      <!-- 確認　パスワード -->
                      <div class="col-12">
                        <label class="form-label">パスワード再入力</label>
                        {{ password_change_form.confirm_password }}
                        <small>確認として、パスワードを再入力してください</small>
                      </div>
                      {{ password_change_form.confirm_password.errors }}
                      <!-- Button  -->
                      <div class="col-12 text-end">
                        <button type="submit" class="btn btn-sm btn-primary mb-0">パスワードを変更する</button>
                      </div>
                    </form>
                    <!-- Settings END -->
                  </div>
                <!-- Card body END -->
                </div>
                <!-- Account settings END -->
            </div>
            <!-- Setting Tab content END -->
        </div>
        <!-- Main content END -->
      </div>
    </div>
    <!-- Container END-->
</main>
<script src="{% static 'vendor/choices.js/public/assets/scripts/choices.min.js' %}"></script>
<script src="{% static 'vendor/dropzone/dist/dropzone.js' %}"></script>
<script src="{% static 'vendor/flatpickr/dist/flatpickr.min.js' %}"></script>
{%  endblock %}